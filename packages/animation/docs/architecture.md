# @tldraw/animation æ¶æ„æ–‡æ¡£

## ğŸ“ é¡¹ç›®ç»“æ„

```
packages/animation/
â”œâ”€â”€ package.json                    # åŒ…é…ç½®å’Œä¾èµ–
â”œâ”€â”€ tsconfig.json                   # TypeScript é…ç½®
â”œâ”€â”€ README.md                       # ç”¨æˆ·æ–‡æ¡£
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts                    # ä¸»å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ types.ts                # ç±»å‹å®šä¹‰
â”‚       â”œâ”€â”€ utils.ts                # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ animations.ts           # é¢„å®šä¹‰åŠ¨ç”»
â”‚       â”œâ”€â”€ effects.ts              # ç‰¹æ•ˆåŠ¨ç”»
â”‚       â”œâ”€â”€ transitions.ts          # è¿‡æ¸¡åŠ¨ç”»
â”‚       â”œâ”€â”€ AnimationSystem.ts      # æ ¸å¿ƒåŠ¨ç”»ç³»ç»Ÿ
â”‚       â””â”€â”€ hooks.ts                # React Hooks
â”œâ”€â”€ examples/
â”‚   â””â”€â”€ basic-usage.template.tsx    # ä½¿ç”¨ç¤ºä¾‹æ¨¡æ¿
â””â”€â”€ docs/
    â””â”€â”€ architecture.md             # æ¶æ„æ–‡æ¡£
```

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ„

### 1. ç±»å‹ç³»ç»Ÿ (`types.ts`)

- **AnimationConfig**: åŠ¨ç”»é…ç½®æ¥å£
- **ShapeAnimationProps**: å½¢çŠ¶åŠ¨ç”»å±æ€§
- **ShapeAnimation**: å®Œæ•´çš„åŠ¨ç”»å®šä¹‰
- **AnimationGroup**: åŠ¨ç”»ç»„ç®¡ç†
- **AnimationType**: åŠ¨ç”»ç±»å‹æšä¸¾

### 2. å·¥å…·å‡½æ•° (`utils.ts`)

- `generateAnimationId()`: ç”Ÿæˆå”¯ä¸€åŠ¨ç”»ID
- `validateAnimationProps()`: éªŒè¯åŠ¨ç”»å±æ€§
- `interpolate()`: æ•°å€¼æ’å€¼è®¡ç®—
- `easingFunctions`: ç¼“åŠ¨å‡½æ•°é›†åˆ
- `normalizeShapeIds()`: æ ‡å‡†åŒ–å½¢çŠ¶IDæ•°ç»„

### 3. é¢„å®šä¹‰åŠ¨ç”» (`animations.ts`)

åŸºç¡€åŠ¨ç”»é¢„è®¾ï¼š
- `fadeIn()` / `fadeOut()`: æ·¡å…¥æ·¡å‡º
- `slideIn()`: æ»‘åŠ¨åŠ¨ç”»
- `scaleIn()`: ç¼©æ”¾åŠ¨ç”»
- `rotate()`: æ—‹è½¬åŠ¨ç”»
- `bounce()`: å¼¹è·³åŠ¨ç”»
- `pulse()`: è„‰å†²åŠ¨ç”»
- `shake()`: æ‘‡æ™ƒåŠ¨ç”»
- `moveTo()`: ç§»åŠ¨åŠ¨ç”»

### 4. ç‰¹æ•ˆç³»ç»Ÿ (`effects.ts`)

é«˜çº§ç‰¹æ•ˆï¼š
- `createExplode()`: çˆ†ç‚¸æ•ˆæœ
- `createImplode()`: å†…çˆ†æ•ˆæœ
- `createRipple()`: æ³¢çº¹æ•ˆæœ
- `createSpiral()`: èºæ—‹æ•ˆæœ
- `createGlow()`: å‘å…‰æ•ˆæœ
- `createTrail()`: æ‹–å°¾æ•ˆæœ
- `createMorph()`: å˜å½¢æ•ˆæœ

### 5. è¿‡æ¸¡åŠ¨ç”» (`transitions.ts`)

é¡µé¢å’ŒçŠ¶æ€è¿‡æ¸¡ï¼š
- `createEnterTransition()`: è¿›å…¥è¿‡æ¸¡
- `createExitTransition()`: é€€å‡ºè¿‡æ¸¡
- `createSequentialTransition()`: åºåˆ—è¿‡æ¸¡
- `createWaveTransition()`: æ³¢æµªè¿‡æ¸¡
- `createCascadeTransition()`: ç€‘å¸ƒè¿‡æ¸¡
- `createRandomTransition()`: éšæœºè¿‡æ¸¡

### 6. åŠ¨ç”»ç³»ç»Ÿæ ¸å¿ƒ (`AnimationSystem.ts`)

æ ¸å¿ƒç®¡ç†ç±»ï¼š
- **çŠ¶æ€ç®¡ç†**: æ´»åŠ¨åŠ¨ç”»ã€åŠ¨ç”»ç»„ç®¡ç†
- **äº‹ä»¶ç³»ç»Ÿ**: åŠ¨ç”»ç”Ÿå‘½å‘¨æœŸäº‹ä»¶
- **æ€§èƒ½ä¼˜åŒ–**: requestAnimationFrame å¾ªç¯
- **å½¢çŠ¶æ›´æ–°**: ä¸ tldraw Editor é›†æˆ

ä¸»è¦æ–¹æ³•ï¼š
- `animate()`: å¼€å§‹å•ä¸ªåŠ¨ç”»
- `animateGroup()`: å¼€å§‹åŠ¨ç”»ç»„
- `stop()` / `stopAll()`: åœæ­¢åŠ¨ç”»
- `pause()` / `resume()`: æš‚åœ/æ¢å¤ç³»ç»Ÿ

### 7. React é›†æˆ (`hooks.ts`)

React Hooksï¼š
- `useAnimationSystem()`: åŠ¨ç”»ç³»ç»Ÿå®ä¾‹
- `useShapeAnimation()`: å®Œæ•´åŠ¨ç”»æ§åˆ¶
- `useAnimationEvents()`: äº‹ä»¶ç›‘å¬
- `useShapeAnimationState()`: å½¢çŠ¶åŠ¨ç”»çŠ¶æ€

## ğŸ”„ æ•°æ®æµ

```
React Component
    â†“ (ä½¿ç”¨ hooks)
useShapeAnimation
    â†“ (è°ƒç”¨æ–¹æ³•)
AnimationSystem
    â†“ (ç®¡ç†çŠ¶æ€)
Active Animations Map
    â†“ (æ›´æ–°å¾ªç¯)
requestAnimationFrame
    â†“ (å±æ€§æ’å€¼)
Shape Properties
    â†“ (æ›´æ–°å½¢çŠ¶)
tldraw Editor
```

## ğŸ¯ è®¾è®¡åŸåˆ™

### 1. æ¨¡å—åŒ–è®¾è®¡
- æ¯ä¸ªæ¨¡å—ä¸“æ³¨å•ä¸€èŒè´£
- æ¸…æ™°çš„æ¥å£å’Œä¾èµ–å…³ç³»
- æ˜“äºæ‰©å±•å’Œç»´æŠ¤

### 2. ç±»å‹å®‰å…¨
- å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
- ä¼˜ç§€çš„å¼€å‘ä½“éªŒ

### 3. æ€§èƒ½ä¼˜åŒ–
- åŸºäº requestAnimationFrame çš„é«˜æ•ˆåŠ¨ç”»å¾ªç¯
- æ™ºèƒ½çš„çŠ¶æ€ç®¡ç†å’Œæ›´æ–°
- æœ€å°åŒ–ä¸å¿…è¦çš„è®¡ç®—

### 4. æ˜“ç”¨æ€§
- ç›´è§‚çš„ API è®¾è®¡
- ä¸°å¯Œçš„é¢„è®¾åŠ¨ç”»
- å®Œæ•´çš„ React é›†æˆ

### 5. å¯æ‰©å±•æ€§
- æ’ä»¶å¼çš„åŠ¨ç”»ç±»å‹
- çµæ´»çš„é…ç½®ç³»ç»Ÿ
- æ”¯æŒè‡ªå®šä¹‰åŠ¨ç”»

## ğŸ”Œ é›†æˆæ–¹å¼

### ä¸ tldraw Editor é›†æˆ
- é€šè¿‡ `useEditor()` è·å–ç¼–è¾‘å™¨å®ä¾‹
- ä½¿ç”¨ `editor.updateShape()` æ›´æ–°å½¢çŠ¶å±æ€§
- ç›‘å¬å½¢çŠ¶é€‰æ‹©å’ŒçŠ¶æ€å˜åŒ–

### ä¸ anime.js é›†æˆ
- ä½¿ç”¨ anime.js çš„ç¼“åŠ¨å‡½æ•°
- å¯é€‰é›†æˆ anime.js çš„é«˜çº§åŠŸèƒ½
- ä¿æŒè½»é‡çº§çš„æ ¸å¿ƒå®ç°

## ğŸš€ ä½¿ç”¨åœºæ™¯

1. **æ•™è‚²æ¼”ç¤º**: å½¢çŠ¶åŠ¨ç”»è§£é‡Šæ¦‚å¿µ
2. **ç”¨æˆ·å¼•å¯¼**: è¿‡æ¸¡åŠ¨ç”»å¼•å¯¼ç”¨æˆ·æ“ä½œ
3. **è§†è§‰åé¦ˆ**: äº¤äº’åŠ¨ç”»æä¾›æ“ä½œåé¦ˆ
4. **æ¼”ç¤ºåˆ¶ä½œ**: ä¸“ä¸šçš„æ¼”ç¤ºåŠ¨ç”»æ•ˆæœ
5. **æ¸¸æˆåŒ–**: å¢åŠ è¶£å‘³æ€§å’Œäº’åŠ¨æ€§

## ğŸ”® æœªæ¥æ‰©å±•

1. **Timeline ç¼–è¾‘å™¨**: å¯è§†åŒ–çš„åŠ¨ç”»æ—¶é—´è½´
2. **å…³é”®å¸§åŠ¨ç”»**: æ”¯æŒå¤æ‚çš„å…³é”®å¸§åŠ¨ç”»
3. **ç‰©ç†å¼•æ“**: é›†æˆç‰©ç†æ¨¡æ‹Ÿæ•ˆæœ
4. **3D åŠ¨ç”»**: æ”¯æŒ 3D å˜æ¢å’ŒåŠ¨ç”»
5. **å¯¼å‡ºåŠŸèƒ½**: å¯¼å‡ºä¸ºè§†é¢‘æˆ– GIF

## ğŸ“Š æŠ€æœ¯æ ˆ

- **TypeScript**: ç±»å‹å®‰å…¨çš„ JavaScript
- **React**: ç”¨æˆ·ç•Œé¢åº“
- **anime.js**: è½»é‡çº§åŠ¨ç”»åº“
- **tldraw**: ç™½æ¿ç¼–è¾‘å™¨æ¡†æ¶
- **requestAnimationFrame**: æµè§ˆå™¨åŠ¨ç”» API 